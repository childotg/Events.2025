<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platform Engineering Beyond Build-vs-Buy: The MinIO Case Study</title>

    <!-- Reveal.js core -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/white.css">

    <style>
/* Session header with slide number */
.reveal .slide-number::before {
    content: "Platform Engineering Beyond Build-vs-Buy • ";
    color: #3498db;
    font-weight: 600;
}

.reveal .slide-number {
    position: fixed;
    top: 20px;
    right: 20px;
    font-size: 18px;
    color: #2c3e50;
    background: transparent;
    font-weight: 400;
    cursor: pointer;
    transition: all 0.3s ease;
}

.reveal .slide-number:hover {
    color: #3498db;
    transform: scale(1.1);
}

/* Navigation menu */
.nav-menu {
    position: fixed;
    top: 60px;
    right: 30px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    padding: 20px;
    display: none;
    z-index: 99;
    min-width: 200px;
}

.nav-menu.active {
    display: block;
}

.nav-menu-title {
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 15px;
    font-size: 16px;
}

.nav-menu-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.nav-menu-btn {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s ease;
}

.nav-menu-btn:hover {
    background: #2980b9;
    transform: translateX(3px);
}

.nav-menu-btn.secondary {
    background: #95a5a6;
}

.nav-menu-btn.secondary:hover {
    background: #7f8c8d;
}

.nav-menu-input {
    display: flex;
    gap: 8px;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #ecf0f1;
}

.nav-menu-input input {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid #ecf0f1;
    border-radius: 6px;
    font-size: 14px;
    outline: none;
    transition: border 0.2s ease;
}

.nav-menu-input input:focus {
    border-color: #3498db;
}

.nav-menu-input button {
    padding: 8px 15px;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s ease;
}

.nav-menu-input button:hover {
    background: #2980b9;
}

/* Base typography */
.reveal {
    font-size: 36px;
}

.reveal h1 {
    font-size: 3em;
    font-weight: 700;
    color: #2c3e50;
}

.reveal h2 {
    font-size: 2em;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 1em;
}

.reveal h3 {
    font-size: 1.5em;
    font-weight: 500;
    color: #34495e;
}

/* Text emphasis */
.emphasis {
    color: #3498db;
    font-weight: 600;
}

/* Quote styles */
.big-quote {
    font-size: 2.5em;
    font-weight: 300;
    line-height: 1.4;
    color: #2c3e50;
    text-align: center;
}

.quote-slide {
    font-size: 2em;
    font-style: italic;
    line-height: 1.5;
    color: #34495e;
    text-align: center;
}

/* Comparison boxes */
.comparison {
    display: flex;
    justify-content: center;
    gap: 2em;
    margin: 2em 0;
}

.comparison > div {
    flex: 1;
    padding: 2em;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.before {
    background: #fff5f5;
    border: 2px solid #e74c3c;
}

.after {
    background: #f0f9ff;
    border: 2px solid #3498db;
}

/* Utility classes */
.small-text {
    font-size: 0.8em;
    color: #7f8c8d;
}

/* Recording Controls - Hidden by default */
.recording-controls {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    padding: 15px 20px;
    display: none;
    align-items: center;
    gap: 15px;
    z-index: 100;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.recording-controls.active {
    display: flex;
}

.recording-controls button {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s ease;
}

.recording-controls button:hover {
    background: #2980b9;
    transform: translateY(-2px);
}

.recording-controls button:disabled {
    background: #95a5a6;
    cursor: not-allowed;
    transform: none;
}

.recording-controls button.recording {
    background: #e74c3c;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.recording-controls button.stop {
    background: #e67e22;
}

.recording-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #2c3e50;
}

.recording-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #95a5a6;
}

.recording-dot.active {
    background: #e74c3c;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.timer {
    font-family: monospace;
    font-size: 16px;
    font-weight: 600;
    color: #2c3e50;
    min-width: 60px;
}
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Slide 0: Opening Image -->
            <section data-background-image="opening_slide.jpg" data-background-size="contain">
            </section>

            <!-- SECTION 1: OPENING + CONTEXT (5 min, 4 slides) -->

            <!-- Slide 1: Title -->
            <section>
                <h1>Platform Engineering<br>Beyond Build-vs-Buy</h1>
                <h3 style="margin-top: 1.5em;">The MinIO Case Study</h3>
                <p class="small-text" style="margin-top: 2em;">SLA & API Conf 2025 • Berlin</p>
            </section>

            <!-- Slide 2: Opening Hook -->
            <section>
                <p class="big-quote">"Imagine your first platform success<br>creates a <span class="emphasis">template</span><br>you can't escape"</p>
            </section>

            <!-- Slide 3: Second Hook -->
            <section>
                <p class="big-quote">"What if the <span class="emphasis">'right'</span> decision today<br>becomes the wrong constraint<br>tomorrow?"</p>
            </section>

            <!-- Slide 4: Auth Success Story -->
            <section>
                <h2>Our Platform Journey Started Well</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ Multiple dev teams, common needs</p>
                    <p style="margin: 1.5em 0;">→ <span class="emphasis">Authentication</span> platform: deployed, working</p>
                    <p style="margin: 1.5em 0;">→ Teams happy, centralized control working</p>
                </div>
                <p class="small-text fragment" style="margin-top: 2em;">Pattern established: centralized = success</p>
            </section>

            <!-- DEEP DIVE: HOW AUTH WORKED (3 slides) -->

            <!-- Slide 5: Keycloak Architecture Overview -->
            <section>
                <h2>Auth Platform: How It Worked</h2>
                <div style="margin: 2em auto; max-width: 1000px;">
                    <div style="display: flex; flex-direction: column; gap: 1.5em; font-size: 0.85em;">
                        <!-- Keycloak Layer -->
                        <div style="background: #3498db; color: white; padding: 1.5em; border-radius: 8px; text-align: center;">
                            <strong>Keycloak (Open Source)</strong>
                            <div style="margin-top: 0.5em; font-size: 0.9em; opacity: 0.9;">Single installation, multi-tenant (Realms)</div>
                        </div>

                        <!-- Platform Layer -->
                        <div style="display: flex; gap: 1em; justify-content: center;">
                            <div style="background: #9b59b6; color: white; padding: 1em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Azure Container Apps</strong>
                                <div style="margin-top: 0.5em; font-size: 0.85em; opacity: 0.9;">No cluster management</div>
                            </div>
                            <div style="background: #e67e22; color: white; padding: 1em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Azure AD Integration</strong>
                                <div style="margin-top: 0.5em; font-size: 0.85em; opacity: 0.9;">Central identity</div>
                            </div>
                        </div>

                        <!-- State Layer -->
                        <div style="display: flex; gap: 1em; justify-content: center;">
                            <div style="background: #16a085; color: white; padding: 1em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>External Database</strong>
                                <div style="margin-top: 0.5em; font-size: 0.85em; opacity: 0.9;">State management</div>
                            </div>
                            <div style="background: #16a085; color: white; padding: 1em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Storage Account</strong>
                                <div style="margin-top: 0.5em; font-size: 0.85em; opacity: 0.9;">Filesystem (themes, configs)</div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="small-text" style="margin-top: 1.5em;">Clean separation: app, platform, state</p>
            </section>

            <!-- Slide 6: Technical Decisions & Challenges -->
            <section>
                <h2>Key Technical Decisions</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">Multi-tenancy via Realms</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Each team gets isolated realm, delegated admin via AD groups</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">Container Apps adaptation</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Web endpoints adjusted for serverless model</span><br>
                        <span style="font-size: 0.8em; color: #95a5a6;">→ See Session 3 today: "Portable PaaS Deployments with Azure Container Apps" 📍</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">Edge cases on filesystem</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Theme management, some configs require direct FS access</span><br>
                        <span style="font-size: 0.85em; color: #95a5a6;">→ Team had to own this operational piece</span>
                    </p>
                </div>
            </section>

            <!-- Slide 7: Early Lessons -->
            <section>
                <h2>What We Learned (Fast)</h2>
                <div class="comparison">
                    <div class="before">
                        <h4>Over-engineered</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            Initially: full AD group-based authorization<br><br>
                            <strong>Lesson:</strong> Keep governance simple until complexity is needed
                        </p>
                    </div>
                    <div class="after">
                        <h4>Pragmatic</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            Simplified to basic delegation<br><br>
                            <strong>Result:</strong> Faster adoption, less operational overhead
                        </p>
                    </div>
                </div>
                <p class="small-text fragment" style="margin-top: 2em;">Governance should scale <span class="emphasis">with need</span>, not anticipation</p>
            </section>

            <!-- SECTION 2: THE BUILD DECISION (6 min, 8 slides) -->

            <!-- Slide 8: Transition -->
            <section>
                <p class="quote-slide">"Auth worked.<br>So we thought storage<br>would be <span class="emphasis">easy</span>..."</p>
            </section>

            <!-- DISCOVERY PHASE (3 slides) -->

            <!-- Slide 9: What We Found -->
            <section>
                <h2>First, We Listened to Teams</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 2;">
                    <p style="margin: 1.2em 0;">→ Multiple teams needing object storage</p>
                    <p style="margin: 1.2em 0;" class="fragment">→ No centralized platform offering</p>
                    <p style="margin: 1.2em 0;" class="fragment">→ No purchasing decision for external vendor</p>
                    <p style="margin: 1.2em 0;" class="fragment">→ <span class="emphasis">Each team solved it themselves</span></p>
                </div>
            </section>

            <!-- Slide 10: The Pattern We Discovered -->
            <section>
                <h2>What We Discovered</h2>
                <div style="margin: 2em auto; max-width: 1000px;">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1em; margin-top: 2em;">
                        <!-- Team 1 -->
                        <div style="background: #ecf0f1; padding: 1.5em; border-radius: 8px; border: 2px solid #95a5a6;">
                            <div style="font-weight: bold; color: #2c3e50; margin-bottom: 0.5em;">Team A</div>
                            <div style="font-size: 0.75em; color: #7f8c8d;">App Stack</div>
                            <div style="background: #e74c3c; color: white; padding: 0.5em; margin-top: 0.5em; border-radius: 4px; font-size: 0.7em;">MinIO<br>(in-process)</div>
                        </div>
                        <!-- Team 2 -->
                        <div style="background: #ecf0f1; padding: 1.5em; border-radius: 8px; border: 2px solid #95a5a6;">
                            <div style="font-weight: bold; color: #2c3e50; margin-bottom: 0.5em;">Team B</div>
                            <div style="font-size: 0.75em; color: #7f8c8d;">App Stack</div>
                            <div style="background: #e74c3c; color: white; padding: 0.5em; margin-top: 0.5em; border-radius: 4px; font-size: 0.7em;">MinIO<br>(different ver.)</div>
                        </div>
                        <!-- Team 3 -->
                        <div style="background: #ecf0f1; padding: 1.5em; border-radius: 8px; border: 2px solid #95a5a6;">
                            <div style="font-weight: bold; color: #2c3e50; margin-bottom: 0.5em;">Team C</div>
                            <div style="font-size: 0.75em; color: #7f8c8d;">App Stack</div>
                            <div style="background: #e67e22; color: white; padding: 0.5em; margin-top: 0.5em; border-radius: 4px; font-size: 0.7em;">Custom S3<br>abstraction</div>
                        </div>
                    </div>
                    <p class="small-text fragment" style="margin-top: 2em; color: #e74c3c;"><strong>Same solution, replicated everywhere—in different versions</strong></p>
                </div>
            </section>

            <!-- Slide 11: The Hidden Problems -->
            <section>
                <h2>The Red Flags</h2>
                <div class="comparison">
                    <div class="before">
                        <h4>Why It Worked (So Far)</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            • Simple use cases<br>
                            • No edge cases hit yet<br>
                            • Low production load<br>
                            • "It just works"
                        </p>
                    </div>
                    <div class="after">
                        <h4>The Hidden Risks</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            • <strong>Black box operations</strong><br>
                            • Hard to debug latency issues<br>
                            • No visibility into storage<br>
                            • Edge cases waiting to surface
                        </p>
                    </div>
                </div>
                <p class="small-text fragment" style="margin-top: 2em;">Storage complexity hidden inside application stacks</p>
            </section>

            <!-- Slide 12: The Insight -->
            <section>
                <p class="quote-slide">"Why not extract MinIO<br>from all these stacks<br>and make it a <span class="emphasis">platform</span>?"</p>
                <p class="small-text fragment" style="margin-top: 2em;">If teams keep reimplementing it, maybe it should be centralized</p>
            </section>

            <!-- Slide 13: Make vs Buy Framework -->
            <section>
                <h2>Storage: The Make vs Buy Decision</h2>
                <div class="comparison">
                    <div class="before">
                        <h4>Buy</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            ✓ Fast deployment<br>
                            ✓ Vendor support<br>
                            ❌ Less control<br>
                            ❌ Limited learning
                        </p>
                    </div>
                    <div class="after">
                        <h4>Make</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            ✓ <strong>Full control</strong><br>
                            ✓ <strong>Build competence</strong><br>
                            ✓ <strong>Team learning</strong><br>
                            ❌ More effort
                        </p>
                    </div>
                </div>
                <p class="small-text" style="margin-top: 2em;">Make wins: acquire competence + maintain control</p>
            </section>

            <!-- Slide 14: Why MinIO -->
            <section>
                <h2>Why MinIO?</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ <span class="emphasis">Teams already using it</span> (de facto standard)</p>
                    <p style="margin: 1.5em 0;">→ S3-compatible API (AWS ecosystem)</p>
                    <p style="margin: 1.5em 0;">→ Open source (control + learning)</p>
                    <p style="margin: 1.5em 0;">→ Active community (battle-tested)</p>
                </div>
            </section>

            <!-- Slide 15: MinIO Infrastructure Building Blocks -->
            <section>
                <h2>MinIO: Infrastructure Components</h2>
                <div style="margin: 2em auto; max-width: 1100px;">
                    <div style="display: flex; flex-direction: column; gap: 1.5em; font-size: 0.8em;">

                        <!-- Layer 1: Client Access -->
                        <div style="display: flex; gap: 1em; justify-content: center;">
                            <div style="background: #3498db; color: white; padding: 1.2em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>S3 API</strong>
                                <div style="margin-top: 0.5em; font-size: 0.9em; opacity: 0.9;">REST endpoints (GET/PUT/DELETE)</div>
                            </div>
                            <div style="background: #9b59b6; color: white; padding: 1.2em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Web Console</strong>
                                <div style="margin-top: 0.5em; font-size: 0.9em; opacity: 0.9;">Browser-based UI</div>
                            </div>
                        </div>

                        <!-- Layer 2: MinIO Server -->
                        <div style="background: #e74c3c; color: white; padding: 1.5em; border-radius: 8px; text-align: center;">
                            <strong style="font-size: 1.2em;">MinIO Server (Stateless)</strong>
                            <div style="margin-top: 0.8em; font-size: 0.95em; opacity: 0.95;">
                                • No database required (metadata stored with objects)<br>
                                • Erasure coding for data protection<br>
                                • Multi-node clustering for HA
                            </div>
                        </div>

                        <!-- Layer 3: Storage -->
                        <div style="display: flex; gap: 1em; justify-content: center;">
                            <div style="background: #16a085; color: white; padding: 1.2em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Persistent Storage</strong>
                                <div style="margin-top: 0.5em; font-size: 0.9em; opacity: 0.9;">Block storage (disks)</div>
                            </div>
                            <div style="background: #f39c12; color: white; padding: 1.2em; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Cloud Integration</strong>
                                <div style="margin-top: 0.5em; font-size: 0.9em; opacity: 0.9;">Azure Disk, Blob, or on-prem</div>
                            </div>
                        </div>

                    </div>
                </div>
                <p class="small-text" style="margin-top: 1.5em;">Simple architecture: API + stateless server + storage. No external DB.</p>
            </section>

            <!-- Slide 16: Initial Success -->
            <section>
                <p class="big-quote">Week 1: <span class="emphasis">Deployed</span></p>
                <p class="big-quote fragment" style="margin-top: 1em;">Week 4: <span class="emphasis">Stable</span></p>
                <p class="big-quote fragment" style="margin-top: 1em;">Week 8: <span class="emphasis">Production</span></p>
            </section>

            <!-- Slide 17: Early Win -->
            <section>
                <p class="quote-slide">"Everything was going<br>according to plan"</p>
                <p class="small-text" style="margin-top: 2em;">For about 3 months...</p>
            </section>

            <!-- SECTION 3: THE PLATEAU (8 min, 8 slides) -->

            <!-- Slide 18: Deployment Challenges -->
            <section>
                <h2>First Challenge: Container Apps Adaptation</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">Problem:</span> MinIO has dual endpoints (API + Console)<br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Container Apps doesn't support dual ingress</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">Solution:</span> NGINX reverse proxy<br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Custom configuration to route traffic</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">Risk:</span> Custom code on top of MinIO<br>
                        <span style="font-size: 0.9em; color: #e74c3c;">→ Every line of code we write must be maintained</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c;">→ Did we cover all edge cases?</span>
                    </p>
                </div>
                <p class="small-text fragment" style="margin-top: 1.5em;">But it worked. The solution seemed solid.</p>
            </section>

            <!-- Slide 19: Storage Backend Choice -->
            <section>
                <h2>Storage Backend: Azure Files</h2>
                <div class="comparison">
                    <div class="after">
                        <h4>Why Azure Files?</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            ✓ Native file system support<br>
                            ✓ Minimal dev effort<br>
                            ✓ Multiple performance tiers<br>
                            ✓ Managed service
                        </p>
                    </div>
                    <div class="before">
                        <h4>Initial Choice</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            Standard tier<br><br>
                            <strong>Assumption:</strong><br>
                            Good enough for workload
                        </p>
                    </div>
                </div>
                <p class="small-text fragment" style="margin-top: 2em;">Then teams started using it in production...</p>
            </section>

            <!-- Slide 20: Performance Issues Surface -->
            <section>
                <h2>Performance Degradation</h2>
                <p class="quote-slide" style="font-size: 1.6em; margin-top: 1em;">"Why is storage so <span class="emphasis">slow</span>?"</p>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 2;">
                    <p style="margin: 1.2em 0;" class="fragment">→ Teams happy with centralized service...</p>
                    <p style="margin: 1.2em 0;" class="fragment">→ But production load revealed bottlenecks</p>
                    <p style="margin: 1.2em 0;" class="fragment">→ <span class="emphasis">Time to optimize</span></p>
                </div>
            </section>

            <!-- Slide 21: The Tuning Rabbit Hole -->
            <section>
                <h2>Performance Tuning: The Journey</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">RAM & CPU tuning</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Found optimal parameters ✓</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">Disk I/O optimization</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Azure Files tier escalation (Standard → Premium → Ultra)</span><br>
                        <span style="font-size: 0.85em; color: #95a5a6;">Cost increasing with each tier...</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <span class="emphasis">The real problem: Application behavior</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c;">• Recursive folder listings</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c;">• Uncached reads</span><br>
                        <span style="font-size: 0.9em; color: #e74c3c;">• Operations that should be batched</span>
                    </p>
                </div>
                <p class="small-text fragment" style="margin-top: 1.5em;">Apps were written assuming ephemeral, "free" local storage</p>
            </section>

            <!-- Slide 22: The Plan vs Reality -->
            <section>
                <h2>Our Plan (vs Reality)</h2>
                <div class="comparison">
                    <div class="after">
                        <h4>The Plan</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            1. Increase platform performance<br>
                            2. Charge teams for usage<br>
                            3. Teams optimize their code<br>
                            4. Everyone wins
                        </p>
                    </div>
                    <div class="before">
                        <h4>Reality</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            1. ✓ We increased performance<br>
                            2. ❌ No time to wait for teams<br>
                            3. ❌ Pressure to deliver now<br>
                            4. → We absorbed the cost
                        </p>
                    </div>
                </div>
                <p class="small-text fragment" style="margin-top: 2em;">We knew this would happen. We chose speed over optimization.</p>
            </section>

            <!-- Slide 23: MinIO's Hidden Behavior -->
            <section>
                <h2>Discovery: MinIO's Consistency Checks</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">MinIO does continuous consistency checks</span><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Even at idle, heavy disk I/O</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <strong>Why?</strong><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Assumes underlying storage might be unreliable</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        <strong>Our assumption:</strong><br>
                        <span style="font-size: 0.9em; color: #7f8c8d;">Azure Files is already reliable... do we need this?</span>
                    </p>
                </div>
            </section>

            <!-- Slide 24: The Dangerous Question -->
            <section>
                <p class="quote-slide" style="font-size: 1.8em;">"What if we <span class="emphasis">disable</span><br>consistency checks?"</p>
                <p class="small-text fragment" style="margin-top: 2em; color: #e74c3c;">Potential 10x performance gain</p>
                <p class="small-text fragment" style="margin-top: 1em; color: #95a5a6;">But...</p>
            </section>

            <!-- Slide 25: The Realization -->
            <section>
                <h2>The Moment We Stopped</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        Changing MinIO's default behavior = <span class="emphasis">deep rabbit hole</span>
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment">
                        → Custom configuration to maintain<br>
                        → Understanding internals we didn't plan to own<br>
                        → Risk we couldn't quantify
                    </p>
                    <p style="margin: 1.2em 0;" class="fragment" style="color: #e74c3c;">
                        <strong>This is where we realized: we need to stop and rethink</strong>
                    </p>
                </div>
            </section>

            <!-- Slide 26: The Principle -->
            <section>
                <p class="quote-slide" style="font-size: 1.8em;">
                    "What if we treated<br>platform decisions as<br><span class="emphasis">reversible</span>?"
                </p>
                <p class="small-text fragment" style="margin-top: 2em;">
                    Not permanent. <span class="emphasis">Iterative</span>.
                </p>
            </section>

            <!-- Slide 27: The Decision Point -->
            <section>
                <h2>Time to Pivot</h2>
                <div style="margin: 2.5em auto; max-width: 900px; text-align: left; font-size: 0.85em; line-height: 1.8;">
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">Team stretched thin</span> → Operations > Innovation
                    </p>
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">Technical debt growing</span> → Custom code, rabbit holes
                    </p>
                    <p style="margin: 1.2em 0;">
                        <span class="emphasis">Business blocked</span> → Platform should enable
                    </p>
                </div>
                <p class="big-quote fragment" style="margin-top: 1.5em; font-size: 1.6em;">We needed to act <span class="emphasis">fast</span></p>
            </section>

            <!-- SECTION 4: THE BUY PHASE (7 min, 5 slides) -->

            <!-- Slide 28: The Buy Decision -->
            <section>
                <h2>The Buy Phase</h2>
                <p class="quote-slide" style="font-size: 1.6em; margin-top: 1em;">"Act fast,<br>without breaking production,<br>with <span class="emphasis">low exit cost</span>"</p>
                <p class="small-text fragment" style="margin-top: 2em;">Not permanent. Reversible if needed.</p>
            </section>

            <!-- Slide 29: Selection Criteria -->
            <section>
                <h2>What We Looked For</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ S3-compatible (minimize migration)</p>
                    <p style="margin: 1.5em 0;">→ <span class="emphasis">Zero downtime</span> migration path</p>
                    <p style="margin: 1.5em 0;">→ Multi-region support</p>
                    <p style="margin: 1.5em 0;">→ Compliance certifications</p>
                </div>
            </section>

            <!-- Slide 30: Migration Strategy -->
            <section>
                <h2>The Key Constraint</h2>
                <p class="big-quote" style="font-size: 2.2em; margin-top: 1.5em;"><span class="emphasis">Zero downtime</span><br>migration</p>
                <p class="small-text" style="margin-top: 2em;">Business continuity was non-negotiable</p>
            </section>

            <!-- Slide 31: Transition Success -->
            <section>
                <h2>The Switch</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ Gradual data migration</p>
                    <p style="margin: 1.5em 0;">→ Dual-write period</p>
                    <p style="margin: 1.5em 0;">→ Cut-over per service</p>
                    <p style="margin: 1.5em 0;">→ <span class="emphasis">Zero incidents</span></p>
                </div>
            </section>

            <!-- Slide 32: Breathing Room -->
            <section>
                <p class="quote-slide">"Now we had breathing room<br>to understand what we<br><span class="emphasis">really needed</span>..."</p>
            </section>

            <!-- SECTION 5: THE LEARNING YEAR (6 min, 5 slides) -->

            <!-- Slide 33: The Shift -->
            <section>
                <h2>What Changed</h2>
                <div class="comparison">
                    <div class="before">
                        <h4>During MinIO</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            Operations-focused<br>
                            Reactive problem-solving<br>
                            Tech governance
                        </p>
                    </div>
                    <div class="after">
                        <h4>With Managed Service</h4>
                        <p style="font-size: 0.75em; margin-top: 1.5em; line-height: 1.8;">
                            <strong>Strategy-focused</strong><br>
                            <strong>Proactive planning</strong><br>
                            <strong>Business governance</strong>
                        </p>
                    </div>
                </div>
            </section>

            <!-- Slide 34: Team Reorganization -->
            <section>
                <h2>Team Evolution</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ Less operational overhead</p>
                    <p style="margin: 1.5em 0;">→ More time for requirements discovery</p>
                    <p style="margin: 1.5em 0;">→ Focus on <span class="emphasis">business needs</span>, not tech specs</p>
                </div>
            </section>

            <!-- Slide 35: Hidden Requirements Revealed -->
            <section>
                <h2>What We Learned</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ Cost patterns across teams</p>
                    <p style="margin: 1.5em 0;">→ Actual compliance requirements</p>
                    <p style="margin: 1.5em 0;">→ Regional data sovereignty needs</p>
                    <p style="margin: 1.5em 0;">→ Integration patterns with other platforms</p>
                </div>
            </section>

            <!-- Slide 36: Key Insight -->
            <section>
                <p class="quote-slide">"<span class="emphasis">Governance</span> scales,<br>code doesn't"</p>
                <p class="small-text" style="margin-top: 2em;">The real platform is the organizational capability</p>
            </section>

            <!-- Slide 37: With Clarity -->
            <section>
                <p class="quote-slide">"With clarity,<br>we could rebuild<br><span class="emphasis">properly</span>..."</p>
            </section>

            <!-- SECTION 6: THE REBUILD (4 min, 4 slides) -->

            <!-- Slide 38: Return to Internal -->
            <section>
                <h2>The Rebuild</h2>
                <p class="big-quote" style="font-size: 2em; margin-top: 1.5em;">Building with <span class="emphasis">knowledge</span><br>not assumptions</p>
            </section>

            <!-- Slide 39: What Changed -->
            <section>
                <h2>This Time, We Knew</h2>
                <div style="margin: 3em auto; max-width: 900px; text-align: left; font-size: 0.9em; line-height: 2;">
                    <p style="margin: 1.5em 0;">→ Exact performance requirements</p>
                    <p style="margin: 1.5em 0;">→ Real compliance needs</p>
                    <p style="margin: 1.5em 0;">→ Cost optimization strategies</p>
                    <p style="margin: 1.5em 0;">→ <span class="emphasis">Business governance</span> framework</p>
                </div>
            </section>

            <!-- Slide 40: Not Failure -->
            <section>
                <h2>Build → Buy → Build</h2>
                <p class="quote-slide" style="font-size: 1.8em; margin-top: 1.5em;">Not failure.<br><span class="emphasis">Informed iteration</span>.</p>
            </section>

            <!-- Slide 41: The Pattern -->
            <section>
                <p class="quote-slide">"What did we learn<br>from this journey?"</p>
            </section>

            <!-- SECTION 7: LESSONS + CTA (4 min, 4 slides) -->

            <!-- Slide 42: Lesson 1 -->
            <section>
                <h2>Takeaway 1</h2>
                <p class="big-quote" style="font-size: 2em; margin-top: 1.5em;"><span class="emphasis">Short-term</span> decisions<br>with low exit costs<br>enable faster learning</p>
            </section>

            <!-- Slide 43: Lesson 2 -->
            <section>
                <h2>Takeaway 2</h2>
                <p class="big-quote" style="font-size: 2em; margin-top: 1.5em;">Platform governance<br>is about <span class="emphasis">business needs</span><br>discovery</p>
                <p class="small-text" style="margin-top: 2em;">Not just technology control</p>
            </section>

            <!-- Slide 44: Lesson 3 -->
            <section>
                <h2>Takeaway 3</h2>
                <p class="big-quote" style="font-size: 2em; margin-top: 1.5em;">Rebuilding after buying<br>isn't failure—<br>it's <span class="emphasis">informed iteration</span></p>
            </section>

            <!-- Slide 45: Call to Action -->
            <section>
                <h2>Your Next Step</h2>
                <p class="quote-slide" style="font-size: 1.6em; margin-top: 1.5em;">"This week: identify <span class="emphasis">one</span><br>platform choice you can<br>make reversible"</p>
                <p class="small-text" style="margin-top: 2em;">Test your assumptions with low switching costs</p>
            </section>

            <!-- Slide 46: Final Message -->
            <section>
                <p class="big-quote">Iteration isn't indecision—<br>it's <span class="emphasis">strategic learning</span></p>
            </section>

            <!-- Slide 47: Thank You -->
            <section>
                <h1>Thank You</h1>
                <p style="margin-top: 2em; font-size: 1.2em;">Questions?</p>
                <p class="small-text" style="margin-top: 3em;">Platform Engineering Beyond Build-vs-Buy • SLA & API Conf 2025</p>
            </section>

            <!-- Slide 48: Feedback Image -->
            <section data-background-image="feedback_slide.jpg" data-background-size="contain">
            </section>

        </div>
    </div>

    <!-- Recording Controls (shown only with ?recording=true) -->
    <div class="recording-controls" id="recordingControls">
        <button id="startRecording" onclick="startRecording()">
            🎙 Start Recording
        </button>
        <button id="stopRecording" onclick="stopRecording()" disabled class="stop">
            ⏹ Stop
        </button>
        <div class="recording-indicator">
            <div class="recording-dot" id="recordingDot"></div>
            <span class="timer" id="timer">00:00</span>
        </div>
        <button id="downloadData" onclick="downloadRecordingData()" disabled>
            💾 Export Data
        </button>
    </div>

    <!-- Quick navigation menu -->
    <div class="nav-menu" id="navMenu">
        <div class="nav-menu-title">Quick Navigation</div>
        <div class="nav-menu-actions">
            <button class="nav-menu-btn" onclick="goToSlide('first')">⏮ First Slide</button>
            <button class="nav-menu-btn" onclick="goToSlide('last')">⏭ Last Slide</button>
            <button class="nav-menu-btn secondary" onclick="toggleOverview()">📋 Overview</button>
        </div>
        <div class="nav-menu-input">
            <input type="number" id="slideInput" placeholder="Slide #" min="1" max="38" onkeypress="if(event.key==='Enter') goToSlideNumber()">
            <button onclick="goToSlideNumber()">Go</button>
        </div>
    </div>

    <!-- Reveal.js scripts -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.js"></script>

    <script>
        // Initialize Reveal
        Reveal.initialize({
            hash: true,
            slideNumber: true,
            controls: true,
            progress: true,
            center: true,
            transition: 'slide',
            width: 1920,
            height: 1080,
            margin: 0.1,
            minScale: 0.2,
            maxScale: 2.0
        });

        // Navigation menu functions
        function initializeNavMenu() {
            const slideNumber = document.querySelector('.slide-number');
            const navMenu = document.getElementById('navMenu');

            // Toggle menu on slide number click
            if (slideNumber) {
                slideNumber.addEventListener('click', function(e) {
                    e.stopPropagation();
                    navMenu.classList.toggle('active');
                });
            }

            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!navMenu.contains(e.target) && !e.target.closest('.slide-number')) {
                    navMenu.classList.remove('active');
                }
            });
        }

        function goToSlide(position) {
            if (position === 'first') {
                Reveal.slide(0);
            } else if (position === 'last') {
                const lastSlide = Reveal.getTotalSlides() - 1;
                Reveal.slide(lastSlide);
            }
            document.getElementById('navMenu').classList.remove('active');
        }

        function toggleOverview() {
            Reveal.toggleOverview();
            document.getElementById('navMenu').classList.remove('active');
        }

        function goToSlideNumber() {
            const input = document.getElementById('slideInput');
            const slideNum = parseInt(input.value) - 1; // Convert to 0-based index
            if (slideNum >= 0 && slideNum < Reveal.getTotalSlides()) {
                Reveal.slide(slideNum);
                input.value = '';
            }
            document.getElementById('navMenu').classList.remove('active');
        }

        // Initialize on load
        Reveal.on('ready', initializeNavMenu);

        // ========================================
        // RECORDING FEATURE - Copy from Session 1
        // ========================================
        const urlParams = new URLSearchParams(window.location.search);
        const recordingEnabled = urlParams.get('recording') === 'true';
        if (recordingEnabled) {
            document.getElementById('recordingControls').classList.add('active');
            console.log('Recording mode enabled. Use controls at bottom-left.');
        }
        let mediaRecorder = null, audioChunks = [], slideTimeline = [], recordingStartTime = null, currentSlideStartTime = null, timerInterval = null;
        if (recordingEnabled) {
            Reveal.on('slidechanged', event => {
                if (mediaRecorder && mediaRecorder.state === 'recording') {
                    const now = Date.now(), slideNumber = Reveal.getIndices(), timeInPresentation = now - recordingStartTime;
                    if (currentSlideStartTime !== null) {
                        const previousSlide = slideTimeline[slideTimeline.length - 1];
                        if (previousSlide) previousSlide.duration = timeInPresentation - currentSlideStartTime;
                    }
                    slideTimeline.push({slideNumber: slideNumber.h + 1, timestamp: timeInPresentation, duration: null, slideTitle: getSlideTitle(event.currentSlide)});
                    currentSlideStartTime = timeInPresentation;
                }
            });
        }
        function getSlideTitle(slideElement) {
            const h1 = slideElement.querySelector('h1'), h2 = slideElement.querySelector('h2'), quote = slideElement.querySelector('.big-quote, .quote-slide');
            if (h1) return h1.textContent.trim();
            if (h2) return h2.textContent.trim();
            if (quote) return quote.textContent.trim().substring(0, 50) + '...';
            return `Slide ${Reveal.getIndices().h + 1}`;
        }
        async function startRecording() {
            if (!recordingEnabled) return;
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream, {mimeType: 'audio/webm;codecs=opus'});
                audioChunks = []; slideTimeline = []; recordingStartTime = Date.now(); currentSlideStartTime = 0;
                const slideNumber = Reveal.getIndices();
                slideTimeline.push({slideNumber: slideNumber.h + 1, timestamp: 0, duration: null, slideTitle: getSlideTitle(Reveal.getCurrentSlide())});
                mediaRecorder.ondataavailable = event => audioChunks.push(event.data);
                mediaRecorder.onstop = () => {
                    const lastSlide = slideTimeline[slideTimeline.length - 1];
                    if (lastSlide) lastSlide.duration = Date.now() - recordingStartTime - currentSlideStartTime;
                    document.getElementById('downloadData').disabled = false;
                };
                mediaRecorder.start();
                document.getElementById('startRecording').disabled = true;
                document.getElementById('stopRecording').disabled = false;
                document.getElementById('startRecording').classList.add('recording');
                document.getElementById('recordingDot').classList.add('active');
                startTimer();
            } catch (err) { alert('Could not access microphone. Please grant permission and try again.'); }
        }
        function stopRecording() {
            if (!recordingEnabled || !mediaRecorder || mediaRecorder.state !== 'recording') return;
            mediaRecorder.stop();
            mediaRecorder.stream.getTracks().forEach(track => track.stop());
            document.getElementById('startRecording').disabled = false;
            document.getElementById('stopRecording').disabled = true;
            document.getElementById('startRecording').classList.remove('recording');
            document.getElementById('recordingDot').classList.remove('active');
            stopTimer();
        }
        function startTimer() {
            let seconds = 0;
            timerInterval = setInterval(() => {
                seconds++;
                document.getElementById('timer').textContent = `${String(Math.floor(seconds/60)).padStart(2,'0')}:${String(seconds%60).padStart(2,'0')}`;
            }, 1000);
        }
        function stopTimer() { if (timerInterval) { clearInterval(timerInterval); timerInterval = null; } }
        function formatTime(ms) {
            if (ms === null) return 'N/A';
            const totalSeconds = Math.floor(ms/1000), mins = Math.floor(totalSeconds/60), secs = totalSeconds%60;
            return `${String(mins).padStart(2,'0')}:${String(secs).padStart(2,'0')}`;
        }
        function downloadRecordingData() {
            if (!recordingEnabled) return;
            const audioBlob = new Blob(audioChunks, {type:'audio/webm'}), audioUrl = URL.createObjectURL(audioBlob), audioLink = document.createElement('a');
            audioLink.href = audioUrl; audioLink.download = `presentation-audio-${Date.now()}.webm`; audioLink.click();
            const timelineData = {
                metadata: {totalDuration: slideTimeline.reduce((sum,slide)=>sum+(slide.duration||0),0), totalSlides: slideTimeline.length, recordingDate: new Date().toISOString(), presentationTitle: document.title},
                slides: slideTimeline.map(slide => ({...slide, timestampFormatted: formatTime(slide.timestamp), durationFormatted: formatTime(slide.duration)}))
            };
            const jsonBlob = new Blob([JSON.stringify(timelineData,null,2)], {type:'application/json'}), jsonUrl = URL.createObjectURL(jsonBlob), jsonLink = document.createElement('a');
            jsonLink.href = jsonUrl; jsonLink.download = `presentation-timeline-${Date.now()}.json`; jsonLink.click();
            const markdown = generateMarkdownReport(timelineData), mdBlob = new Blob([markdown], {type:'text/markdown'}), mdUrl = URL.createObjectURL(mdBlob), mdLink = document.createElement('a');
            mdLink.href = mdUrl; mdLink.download = `presentation-report-${Date.now()}.md`; mdLink.click();
        }
        function generateMarkdownReport(data) {
            let md = `# Presentation Delivery Report\n\n**Date**: ${new Date(data.metadata.recordingDate).toLocaleString()}\n**Title**: ${data.metadata.presentationTitle}\n**Total Duration**: ${formatTime(data.metadata.totalDuration)}\n**Total Slides**: ${data.metadata.totalSlides}\n\n## Slide Timing Breakdown\n\n| Slide # | Title | Time on Slide | Timestamp |\n|---------|-------|---------------|------------|\n`;
            data.slides.forEach(slide => { md += `| ${slide.slideNumber} | ${slide.slideTitle} | ${slide.durationFormatted} | ${slide.timestampFormatted} |\n`; });
            md += `\n## Statistics\n\n- **Average time per slide**: ${formatTime(data.metadata.totalDuration/data.metadata.totalSlides)}\n`;
            const durations = data.slides.map(s=>s.duration).filter(d=>d!==null);
            if (durations.length>0) {
                const maxDuration = Math.max(...durations), maxSlide = data.slides.find(s=>s.duration===maxDuration);
                md += `- **Longest slide**: Slide ${maxSlide.slideNumber} (${formatTime(maxDuration)})\n`;
                const minDuration = Math.min(...durations), minSlide = data.slides.find(s=>s.duration===minDuration);
                md += `- **Shortest slide**: Slide ${minSlide.slideNumber} (${formatTime(minDuration)})\n`;
            }
            md += `\n## AI Analysis Prompt\n\n\\\`\\\`\\\`\nPlease analyze this presentation delivery:\n\n1. Review the audio file for:\n   - Pacing and rhythm\n   - Clarity and articulation\n   - Pauses and emphasis\n   - Filler words (um, uh, like)\n\n2. Review the timeline for:\n   - Time distribution across slides\n   - Slides that were rushed or too slow\n   - Overall pacing consistency\n\n3. Provide specific feedback on:\n   - Which slides need more/less time\n   - Moments where delivery could be improved\n   - Overall presentation flow\n\\\`\\\`\\\`\n`;
            return md;
        }
    </script>
</body>
</html>
